{"ast":null,"code":"import React,{useEffect,useState}from'react';import L from'leaflet';import'leaflet/dist/leaflet.css';import{io}from'socket.io-client';import'./leafletFix';// this fixes default icon missing issue\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const socket=io('http://localhost:5000');const App=()=>{const[map,setMap]=useState(null);const[marker,setMarker]=useState(null);const[eta,setEta]=useState(null);useEffect(()=>{const mapInstance=L.map('map').setView([22.5726,88.3639],13);L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(mapInstance);setMap(mapInstance);},[]);useEffect(()=>{socket.on('locationUpdate',_ref=>{let{lat,lng,eta}=_ref;if(!map)return;if(marker){marker.setLatLng([lat,lng]);}else{const newMarker=L.marker([lat,lng]).addTo(map);setMarker(newMarker);}map.setView([lat,lng],13);setEta(eta);});return()=>socket.off('locationUpdate');},[map,marker]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{id:\"map\",style:{height:\"90vh\"}}),/*#__PURE__*/_jsx(\"div\",{style:{padding:\"10px\",backgroundColor:\"#eee\"},children:eta!==null?\"Estimated Time of Arrival: \".concat(eta,\" mins\"):'Waiting for driver location...'})]});};export default App;","map":{"version":3,"names":["React","useEffect","useState","L","io","jsx","_jsx","jsxs","_jsxs","socket","App","map","setMap","marker","setMarker","eta","setEta","mapInstance","setView","tileLayer","addTo","on","_ref","lat","lng","setLatLng","newMarker","off","children","id","style","height","padding","backgroundColor","concat"],"sources":["C:/Users/SUBHRAJIT DHAR/realtime-delivery-tracking/client/user/src/App.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport L from 'leaflet';\nimport 'leaflet/dist/leaflet.css';\nimport { io } from 'socket.io-client';\nimport './leafletFix';  // this fixes default icon missing issue\n\nconst socket = io('http://localhost:5000');\n\nconst App = () => {\n  const [map, setMap] = useState(null);\n  const [marker, setMarker] = useState(null);\n  const [eta, setEta] = useState(null);\n\n  useEffect(() => {\n    const mapInstance = L.map('map').setView([22.5726, 88.3639], 13);\n    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png').addTo(mapInstance);\n    setMap(mapInstance);\n  }, []);\n\n  useEffect(() => {\n    socket.on('locationUpdate', ({ lat, lng, eta }) => {\n      if (!map) return;\n\n      if (marker) {\n        marker.setLatLng([lat, lng]);\n      } else {\n        const newMarker = L.marker([lat, lng]).addTo(map);\n        setMarker(newMarker);\n      }\n\n      map.setView([lat, lng], 13);\n      setEta(eta);\n    });\n\n    return () => socket.off('locationUpdate');\n  }, [map, marker]);\n\n  return (\n    <div>\n      <div id=\"map\" style={{ height: \"90vh\" }} />\n      <div style={{ padding: \"10px\", backgroundColor: \"#eee\" }}>\n        {eta !== null ? `Estimated Time of Arrival: ${eta} mins` : 'Waiting for driver location...'}\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAClD,MAAO,CAAAC,CAAC,KAAM,SAAS,CACvB,MAAO,0BAA0B,CACjC,OAASC,EAAE,KAAQ,kBAAkB,CACrC,MAAO,cAAc,CAAG;AAAA,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAExB,KAAM,CAAAC,MAAM,CAAGL,EAAE,CAAC,uBAAuB,CAAC,CAE1C,KAAM,CAAAM,GAAG,CAAGA,CAAA,GAAM,CAChB,KAAM,CAACC,GAAG,CAAEC,MAAM,CAAC,CAAGV,QAAQ,CAAC,IAAI,CAAC,CACpC,KAAM,CAACW,MAAM,CAAEC,SAAS,CAAC,CAAGZ,QAAQ,CAAC,IAAI,CAAC,CAC1C,KAAM,CAACa,GAAG,CAAEC,MAAM,CAAC,CAAGd,QAAQ,CAAC,IAAI,CAAC,CAEpCD,SAAS,CAAC,IAAM,CACd,KAAM,CAAAgB,WAAW,CAAGd,CAAC,CAACQ,GAAG,CAAC,KAAK,CAAC,CAACO,OAAO,CAAC,CAAC,OAAO,CAAE,OAAO,CAAC,CAAE,EAAE,CAAC,CAChEf,CAAC,CAACgB,SAAS,CAAC,oDAAoD,CAAC,CAACC,KAAK,CAACH,WAAW,CAAC,CACpFL,MAAM,CAACK,WAAW,CAAC,CACrB,CAAC,CAAE,EAAE,CAAC,CAENhB,SAAS,CAAC,IAAM,CACdQ,MAAM,CAACY,EAAE,CAAC,gBAAgB,CAAEC,IAAA,EAAuB,IAAtB,CAAEC,GAAG,CAAEC,GAAG,CAAET,GAAI,CAAC,CAAAO,IAAA,CAC5C,GAAI,CAACX,GAAG,CAAE,OAEV,GAAIE,MAAM,CAAE,CACVA,MAAM,CAACY,SAAS,CAAC,CAACF,GAAG,CAAEC,GAAG,CAAC,CAAC,CAC9B,CAAC,IAAM,CACL,KAAM,CAAAE,SAAS,CAAGvB,CAAC,CAACU,MAAM,CAAC,CAACU,GAAG,CAAEC,GAAG,CAAC,CAAC,CAACJ,KAAK,CAACT,GAAG,CAAC,CACjDG,SAAS,CAACY,SAAS,CAAC,CACtB,CAEAf,GAAG,CAACO,OAAO,CAAC,CAACK,GAAG,CAAEC,GAAG,CAAC,CAAE,EAAE,CAAC,CAC3BR,MAAM,CAACD,GAAG,CAAC,CACb,CAAC,CAAC,CAEF,MAAO,IAAMN,MAAM,CAACkB,GAAG,CAAC,gBAAgB,CAAC,CAC3C,CAAC,CAAE,CAAChB,GAAG,CAAEE,MAAM,CAAC,CAAC,CAEjB,mBACEL,KAAA,QAAAoB,QAAA,eACEtB,IAAA,QAAKuB,EAAE,CAAC,KAAK,CAACC,KAAK,CAAE,CAAEC,MAAM,CAAE,MAAO,CAAE,CAAE,CAAC,cAC3CzB,IAAA,QAAKwB,KAAK,CAAE,CAAEE,OAAO,CAAE,MAAM,CAAEC,eAAe,CAAE,MAAO,CAAE,CAAAL,QAAA,CACtDb,GAAG,GAAK,IAAI,+BAAAmB,MAAA,CAAiCnB,GAAG,UAAU,gCAAgC,CACxF,CAAC,EACH,CAAC,CAEV,CAAC,CAED,cAAe,CAAAL,GAAG","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}